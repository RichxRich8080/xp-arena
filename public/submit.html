<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rankings Clearance â€¢ XP ARENA</title>
    <link rel="stylesheet" href="css/rebirth.css">
    <link rel="stylesheet" href="assets/fontawesome/css/all.min.css">
    <style>
        .submit-hero {
            padding: 10rem 2rem 5rem;
            text-align: center;
            background: radial-gradient(circle at bottom left, rgba(255, 68, 68, 0.05), transparent 60%);
        }

        .submit-hero h1 {
            font-size: clamp(3rem, 10vw, 5rem);
            line-height: 0.9;
        }

        .submit-section {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 2rem 10rem;
        }

        .rules-grid {
            margin-bottom: 3rem;
        }

        .rule-node {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255, 68, 68, 0.03);
            border-left: 2px solid #ff4444;
            border-radius: 0 12px 12px 0;
            margin-bottom: 0.75rem;
            font-size: 0.85rem;
            color: var(--stardust-muted);
        }

        .rule-node i {
            color: #ff4444;
        }

        .submission-card {
            padding: 3rem;
        }

        .form-grid {
            display: grid;
            gap: 1.5rem;
        }

        .input-node {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .input-node label {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 800;
            color: var(--stardust-muted);
        }

        .glass-input {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 1.2rem;
            color: #fff;
            font-family: inherit;
            transition: all 0.3s;
        }

        .glass-input:focus {
            border-color: var(--photon);
            background: rgba(255, 255, 255, 0.06);
            outline: none;
            box-shadow: 0 0 15px rgba(0, 245, 255, 0.1);
        }

        .success-overlay-rebirth {
            position: fixed;
            inset: 0;
            background: var(--void);
            z-index: 2000;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
        }

        .success-overlay-rebirth.active {
            display: flex;
        }

        .success-hero {
            font-size: clamp(3rem, 15vw, 8rem);
            margin-bottom: 2rem;
            animation: pulse-photon 2s infinite;
        }

        @keyframes pulse-photon {

            0%,
            100% {
                transform: scale(1);
                opacity: 0.8;
            }

            50% {
                transform: scale(1.05);
                opacity: 1;
            }
        }
    </style>
</head>

<body class="page-rebirth">
    <div class="submit-hero">
        <span class="section-label" style="letter-spacing: 0.5rem; margin-bottom: 2rem;">Intel Submission
            Corridor</span>
        <h1 class="clash">RANKINGS<br><span class="text-photon">CLEARANCE</span></h1>
        <p style="color: var(--stardust-muted); max-width: 500px; margin: 2rem auto 0; font-size: 1.1rem;">
            Upload your tactical highlights to the neural grid. Secure your position in the weekly rankings.
        </p>
    </div>

    <div class="submit-section">
        <!-- Rules -->
        <div class="rules-grid">
            <div class="rule-node"><i class="fas fa-volume-mute"></i> Clean Audio Profile (Game Sound Only)</div>
            <div class="rule-node"><i class="fas fa-hourglass-half"></i> Maximum Runtime: 60 Seconds</div>
            <div class="rule-node"><i class="fas fa-shield-virus"></i> Integrity Check: No Neural Augmentations (Cheats)
            </div>
        </div>

        <!-- Form Area -->
        <div class="pulse-card submission-card" id="submissionArea">
            <div id="authGuard" style="display: none; text-align: center; padding: 2rem 0;">
                <div style="font-size: 4rem; margin-bottom: 2rem; opacity: 0.3;">ðŸ”’</div>
                <h2 class="clash" style="margin-bottom: 1rem;">ACCESS DENIED</h2>
                <p style="color: var(--stardust-muted); margin-bottom: 3rem;">Authentication required to submit data and
                    earn AXP clearance.</p>
                <div style="display: grid; gap: 1rem; max-width: 300px; margin: 0 auto;">
                    <a href="identity/login.html" class="btn-rebirth btn-photon" style="justify-content: center;">INITIATE
                        LOGIN</a>
                    <a href="identity/signup.html" class="btn-rebirth" style="justify-content: center;">CREATE TOKEN</a>
                </div>
            </div>

            <form action="https://formsubmit.co/umarsa8080@gmail.com" method="POST" id="submissionForm"
                style="display: none;">
                <input type="hidden" name="_subject" value="Rebirth Submission - XP ARENA">
                <input type="hidden" name="_captcha" value="false">

                <div class="form-grid">
                    <div class="input-node">
                        <label>OPERATIVE IDENTIFIER</label>
                        <input type="text" name="gamertag" id="form-gamertag" class="glass-input"
                            placeholder="e.g. ShadowAlpha" required>
                    </div>

                    <div class="input-node">
                        <label>NEURAL UID</label>
                        <input type="text" name="uid" class="glass-input" placeholder="e.g. 10293847" required>
                    </div>

                    <div class="input-node">
                        <label>COMMUNICATION LINK (WHATSAPP)</label>
                        <input type="tel" name="whatsapp" class="glass-input" placeholder="+234..." required>
                    </div>

                    <div class="input-node">
                        <label>INTEL URL (YOUTUBE / DRIVE / TIKTOK)</label>
                        <input type="url" name="clip_url" class="glass-input" placeholder="https://..." required>
                    </div>

                    <button type="submit" class="btn-rebirth btn-photon"
                        style="margin-top: 2rem; justify-content: center; height: 3.5rem;">
                        <i class="fas fa-upload"></i> BROADCAST INTEL
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Rebirth Success Overlay -->
    <div class="success-overlay-rebirth" id="successOverlay">
        <div class="success-hero clash text-photon">UPLOAD COMPLETE</div>
        <p style="color: var(--stardust-muted); max-width: 500px; margin-bottom: 4rem; font-size: 1.2rem;">
            Your intel has been successfully broadcasted to the neural grid. High Command will review the logs.
        </p>
        <div style="display: flex; gap: 1.5rem;">
            <button class="btn-rebirth btn-photon" onclick="window.location.href='index.html'">BASE COMMAND</button>
            <button class="btn-rebirth" onclick="location.reload()">NEW BROADCAST</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/user.js"></script>
    <script src="js/layout.js"></script>
    <script>
        const form = document.getElementById('submissionForm');
        const authGuard = document.getElementById('authGuard');
        const btn = document.querySelector('#submissionForm button');
        const overlay = document.getElementById('successOverlay');

        function checkAuth() {
            if (!Auth.isLoggedIn()) {
                form.style.display = 'none';
                authGuard.style.display = 'block';
            } else {
                form.style.display = 'block';
                authGuard.style.display = 'none';
                const user = Auth.getCurrentUser();
                const gamerTagInput = document.getElementById('form-gamertag');
                if (gamerTagInput && user.username) {
                    gamerTagInput.value = user.username;
                }
            }
        }

        document.addEventListener('DOMContentLoaded', checkAuth);
        window.addEventListener('authChange', checkAuth);

        form.addEventListener('submit', function (e) {
            e.preventDefault();
            btn.innerHTML = '<i class="fas fa-satellite fa-spin"></i> BROADCASTING...';
            btn.style.opacity = "0.7";

            const formData = new FormData(form);

            fetch(form.action, {
                method: "POST",
                body: formData,
                headers: { 'Accept': 'application/json' }
            })
                .then(response => {
                    if (response.ok) {
                        overlay.classList.add('active');
                        form.reset();
                        if (Auth.isLoggedIn()) {
                            User.addClip({
                                device: formData.get('gamertag') || 'Mobile Areni',
                                url: formData.get('clip_url')
                            });
                        }
                    } else {
                        alert("BROADCAST ERROR: Grid interference detected. Please retry.");
                        btn.innerHTML = '<i class="fas fa-upload"></i> BROADCAST INTEL';
                        btn.style.opacity = "1";
                    }
                })
                .catch(error => {
                    console.error("Submission error:", error);
                    alert("NEURAL LINK FAILED: Check your uplink.");
                    btn.innerHTML = '<i class="fas fa-upload"></i> BROADCAST INTEL';
                    btn.style.opacity = "1";
                });
        });
    </script>
</body>

</html>