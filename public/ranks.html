<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ranks ‚Ä¢ XP ARENA</title>
    <link rel="stylesheet" href="css/rebirth.css">
    <link rel="stylesheet" href="assets/fontawesome/css/all.min.css">
    <style>
        .ranks-container {
            padding: 8rem 2rem 10rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .ranks-header {
            text-align: center;
            margin-bottom: 5rem;
        }

        .ranks-header h1 {
            font-size: 4rem;
            line-height: 1;
            margin-bottom: 1rem;
        }

        .status-module {
            background: var(--glass-highlight);
            padding: 2.5rem;
            border-radius: var(--radius-lg);
            border: 1px solid var(--photon);
            margin-bottom: 4rem;
            text-align: center;
            box-shadow: 0 0 30px var(--photon-glow);
        }

        .current-rank-label {
            font-size: 0.7rem;
            letter-spacing: 0.2rem;
            color: var(--stardust-muted);
            text-transform: uppercase;
            margin-bottom: 0.5rem;
            display: block;
        }

        #currentRankDisplay {
            font-size: 3rem;
            margin-bottom: 1.5rem;
        }

        .progress-track {
            height: 6px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 100px;
            overflow: hidden;
            margin: 1.5rem 0;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        #axp-progress-fill {
            height: 100%;
            width: 0%;
            background: var(--photon);
            box-shadow: 0 0 15px var(--photon-glow);
            transition: width 1s cubic-bezier(0.19, 1, 0.22, 1);
        }

        /* Rank Cards */
        .rank-card {
            display: grid;
            grid-template-columns: 80px 1fr auto;
            align-items: center;
            gap: 2rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s var(--transition);
        }

        .rank-card.active {
            border-color: var(--photon);
            background: var(--glass-highlight);
            box-shadow: 0 0 20px var(--photon-glow);
        }

        .rank-icon {
            font-size: 2.5rem;
            width: 80px;
            height: 80px;
            background: var(--nebula);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rank-card.active .rank-icon {
            border-color: var(--photon);
            color: var(--photon);
        }

        .rank-info h3 {
            font-size: 1.4rem;
            margin-bottom: 0.2rem;
        }

        .rank-info p {
            font-size: 0.85rem;
            color: var(--stardust-muted);
        }

        .rank-req {
            font-family: 'Clash Display', sans-serif;
            font-weight: 700;
            color: var(--photon);
            font-size: 1.1rem;
        }

        @media (max-width: 600px) {
            .ranks-header h1 {
                font-size: 2.5rem;
            }

            .rank-card {
                grid-template-columns: 60px 1fr;
                gap: 1rem;
            }

            .rank-req {
                grid-column: 1/-1;
                text-align: left;
                font-size: 0.9rem;
            }

            .rank-icon {
                width: 60px;
                height: 60px;
                font-size: 1.8rem;
            }
        }
    </style>
</head>

<body>
    <div class="ranks-container">
        <header class="ranks-header">
            <span class="section-label" style="letter-spacing: 0.4rem;">Hierarchical Progression</span>
            <h1 class="clash">ARENI<br><span class="text-photon">TIERS</span></h1>
            <p style="color: var(--stardust-muted);">Climb the ranks by securing AXP through global operations.</p>
        </header>

        <div class="status-module">
            <span class="current-rank-label">Active Designation</span>
            <h2 class="clash text-photon" id="currentRankDisplay">STARTER</h2>
            <div style="font-weight: 700; color: var(--stardust);" id="axpSummary">0 AXP SECURED</div>
            <div class="progress-track">
                <div id="axp-progress-fill"></div>
            </div>
            <div id="nextRankStatus"
                style="font-size: 0.8rem; color: var(--stardust-muted); text-transform: uppercase; letter-spacing: 0.1rem;">
                SCANNING NEXT TIER...</div>
        </div>

        <div id="ranksList">
            <!-- Dynamic Injection -->
        </div>

        <div
            style="margin-top: 6rem; padding: 2.5rem; border: 1px solid var(--glass-border); border-radius: var(--radius-lg); display: flex; align-items: center; gap: 2rem;">
            <div style="font-size: 3rem;">üéñÔ∏è</div>
            <div>
                <h3 class="clash" style="color: var(--photon);">THE CHAMPION'S PROOF</h3>
                <p style="font-size: 0.85rem; color: var(--stardust-muted); line-height: 1.5;">Reach the Champion tier
                    (100,000 AXP) to unlock the <span class="text-photon">Verified Badge</span> and exclusive neural
                    profile effects.</p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/user.js"></script>
    <script src="js/layout.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (!Auth.isLoggedIn()) {
                window.location.href = 'login.html';
                return;
            }

            renderRanksList();
            updateRanksUI();
            window.addEventListener('statsChange', updateRanksUI);
        });

        function renderRanksList() {
            const list = document.getElementById('ranksList');
            // RANKS constant is defined in app.js / user.js context
            const rankData = [
                { name: 'Starter', minAXP: 0, icon: 'üî∞', desc: 'Entry-level operative.' },
                { name: 'Rookie', minAXP: 500, icon: 'ü•â', desc: 'Basic training complete.' },
                { name: 'Specialist', minAXP: 2500, icon: 'ü•à', desc: 'Advanced field experience.' },
                { name: 'Elite', minAXP: 10000, icon: 'ü•á', desc: 'Top-tier performance metrics.' },
                { name: 'Master', minAXP: 25000, icon: 'üíé', desc: 'Legendary status attained.' },
                { name: 'Grandmaster', minAXP: 50000, icon: 'üî•', desc: 'Master of the neural matrix.' },
                { name: 'Champion', minAXP: 100000, icon: 'üëë', desc: 'Peak Areni evolution.' }
            ];

            list.innerHTML = rankData.map(rank => `
                <div class="pulse-card rank-card" id="rank-${rank.name.toLowerCase()}">
                    <div class="rank-icon">${rank.icon}</div>
                    <div class="rank-info">
                        <h3 class="clash">${rank.name.toUpperCase()}</h3>
                        <p>${rank.desc}</p>
                    </div>
                    <div class="rank-req">${rank.minAXP.toLocaleString()} <span style="font-size: 0.6rem; color: var(--stardust-muted);">AXP</span></div>
                </div>
            `).join('');
        }

        function updateRanksUI() {
            const stats = User.getStats();
            if (!stats) return;

            const rankData = [
                { name: 'Starter', minAXP: 0 },
                { name: 'Rookie', minAXP: 500 },
                { name: 'Specialist', minAXP: 2500 },
                { name: 'Elite', minAXP: 10000 },
                { name: 'Master', minAXP: 25000 },
                { name: 'Grandmaster', minAXP: 50000 },
                { name: 'Champion', minAXP: 100000 }
            ];

            const currentRankName = stats.rank.name || stats.rank;
            const currentRankIndex = rankData.findIndex(r => r.name.toLowerCase() === currentRankName.toLowerCase());
            const currentRank = rankData[currentRankIndex] || rankData[0];
            const nextRank = rankData[currentRankIndex + 1];

            document.getElementById('currentRankDisplay').textContent = currentRank.name.toUpperCase();
            document.getElementById('axpSummary').textContent = `${stats.axp.toLocaleString()} AXP SECURED`;

            document.querySelectorAll('.rank-card').forEach(card => card.classList.remove('active'));
            const activeCard = document.getElementById(`rank-${currentRank.name.toLowerCase()}`);
            if (activeCard) activeCard.classList.add('active');

            if (nextRank) {
                const range = nextRank.minAXP - currentRank.minAXP;
                const progress = stats.axp - currentRank.minAXP;
                const percent = Math.min((progress / range) * 100, 100);
                document.getElementById('axp-progress-fill').style.width = percent + '%';
                document.getElementById('nextRankStatus').textContent = `${(nextRank.minAXP - stats.axp).toLocaleString()} AXP UNTIL ${nextRank.name.toUpperCase()}`;
            } else {
                document.getElementById('axp-progress-fill').style.width = '100%';
                document.getElementById('nextRankStatus').textContent = 'MAXIMUM TIER REACHED';
            }
        }
    </script>
</body>

</html>